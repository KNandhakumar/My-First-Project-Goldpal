<!--<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Goldpal Login</title>
	<link rel="icon" href="goldpal.png">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

	<link rel="stylesheet" href="style.css" />
</head>

<body>
	<form id="registrationForm" name="myform2" action="/api/users/register" method="POST">
		<div class="login_form_container1">
			<div class="login_form">
				<h2 class="head">Register</h2>
				<div class="input_group1">
					<i class="fa fa-user"></i>
					<input type="text" name="username" placeholder="Username" class="input_text1" autocomplete="off"
						required="" maxlength="30" />
				</div>

				<div class="input_group1">
					<i class="fa fa-user"></i>
					<input type="email" name="email" placeholder="Email" class="input_text1" autocomplete="off"
						required="" maxlength="30" />
				</div>

				<div class="input_group1">
					<i class="fa fa-user"></i>
					<input type="number" name="phone" placeholder="Enter Mobile" class="input_text1" autocomplete="off"
						required="" minlength="10" />
				</div>

				 <div class="input_group1">
                <i class="fa fa-user"></i>
                <input
                  type="text"
                  name="aadhar"
                  placeholder="Enter Aadhar Number"
                  class="input_text1"
                  autocomplete="off" required="" min="12"
                />
              </div>

              <div class="input_group1">
                <i class="fa fa-user"></i>
                <input
                  type="text"
                  name="Pancard"
                  placeholder="Enter Your Pancard Number"
                  class="input_text1"
                  autocomplete="off" required="" min="20"
                />
              </div>

				<div class="input_group1">
					<i class="fa fa-unlock-alt"></i>
					<input type="password" name="password" placeholder="Password" class="input_text1" autocomplete="off"
						required="" />
				</div>

				<div class="input_group1">
					<i class="fa fa-unlock-alt"></i>
					<input type="password" name="Re-Enter Password" placeholder="Re-Enter Password" class="input_text1"
						autocomplete="off" required="" />
				</div>

				<div class="button_group1" id="login_button">
					<input type="submit" name="register" value="Register">
				</div>
				<div class="fotter1">
					<a href="privacy.html">Privacy</a>
					<a href="Login.html">Login</a>
				</div>
			</div>
		</div>

	</form>
	<script>
		document.getElementById('registrationForm').addEventListener('submit', function (event) {
			event.preventDefault();

			const formData = new FormData(this);
			const data = {};
			formData.forEach((value, key) => {
				data[key] = value;
			});

			// Send the registration data to the backend
			fetch('/api/users/register', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(data)
			})
				.then(response => {
					if (response.ok) {
						alert('User registered successfully');
						window.location.href = '/goldpal%20login%20page/Login.html';  // Redirect to login page
					} else {
						alert('Failed to register user');
					}
				})
				.catch(error => console.error('Error:', error));
		});
	</script>
</body>

</html>-->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Goldpal Register Page</title>
	<link rel="icon" href="goldpal logo.jpg">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

	<link rel="stylesheet" href="style.css" />
	<style>
		.error {
			color: cyan;
		}
	</style>
</head>

<body>
	<form id="registrationForm" name="myform2" action="/api/users/register" method="POST">
		<div class="login_form_container1">
			<div class="login_form">
				<h2 class="head">Register</h2>

				<div class="input_group1">
					<i class="fa fa-user"></i>
					<input type="text" name="username" placeholder="Username" class="input_text1" autocomplete="off"
						required="" maxlength="30" />
				</div>

				<div class="input_group1">
					<i class="fa fa-user"></i>
					<input type="email" name="email" placeholder="Email" class="input_text1" autocomplete="off"
						required="" maxlength="30" />
					<span class="error" id="emailError"></span>
				</div>
				<span class="error" id="phoneError"></span>
				<div class="input_group1">
					<i class="fa fa-user"></i>
					<input type="tel" name="phone" placeholder="Enter Mobile" class="input_text1" autocomplete="off"
						required="" minlength="10" />
				</div>

				<span class="error" id="passwordError"></span>
				<div class="input_group1">
					<i class="fa fa-unlock-alt"></i>
					<input type="password" name="password" placeholder="Password" class="input_text1" autocomplete="off"
						required="" minlength="8" />

				</div>
				<span class="error" id="reEnterPasswordError"></span>
				<div class="input_group1">
					<i class="fa fa-unlock-alt"></i>
					<input type="password" name="reEnterPassword" placeholder="Re-Enter Password" class="input_text1"
						autocomplete="off" required="" />

				</div>

				<div class="button_group1" id="login_button">
					<input type="submit" name="register" value="Register">
				</div>
				<div class="fotter1">
					<a href="privacy.html">Privacy</a>
					<a href="Login.html">Login</a>
				</div>
			</div>
		</div>

	</form>
	<script>
		document.getElementById('registrationForm').addEventListener('submit', function (event) {
			event.preventDefault();

			// Reset error messages
			document.getElementById('emailError').innerText = '';
			document.getElementById('phoneError').innerText = '';
			document.getElementById('passwordError').innerText = '';
			document.getElementById('reEnterPasswordError').innerText = '';

			const formData = new FormData(this);
			const data = {};
			formData.forEach((value, key) => {
				data[key] = value;
			});

			const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
			const phoneRegex = /^\d{10}$/;
			const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;

			if (!data['email'].match(emailRegex)) {
				document.getElementById('emailError').innerText = 'Please enter a valid email address.';
				return;
			}

			if (!data['phone'].match(phoneRegex)) {
				document.getElementById('phoneError').innerText = 'number should be exactly 10 digits.';
				return;
			}

			if (!data['password'].match(passwordRegex)) {
				document.getElementById('passwordError').innerText = 'should be contain 8 characters and both letters and numbers.';
				return;
			}

			if (data['password'] !== data['reEnterPassword']) {
				document.getElementById('reEnterPasswordError').innerText = 'Passwords do not match.';
				return;
			}

			// Send the registration data to the backend
			fetch('/api/users/register', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(data)
			})
				.then(response => {
					if (response.ok) {
						alert('User registered successfully');
						window.location.href = '/goldpal%20login%20page/Login.html';  // Redirect to login page
					} else {
						alert('Failed to register user');
					}
				})
				.catch(error => console.error('Error:', error));
		});
	</script>
</body>

</html>